<% content_for :title, "프로필 수정 - 디어스" %>

<div class="min-h-screen bg-gray-50 py-12">
  <div class="container mx-auto px-4 max-w-2xl">
    <div class="bg-white rounded-2xl shadow-sm p-8">
      <h1 class="text-2xl font-bold text-gray-900 mb-8">프로필 수정</h1>

      <%= form_with(model: @user, url: mypage_path, method: :patch, local: true, html: { class: "space-y-6", data: { turbo: false } }) do |f| %>
        <% if @user.errors.any? %>
          <div class="bg-red-50 border border-red-200 rounded-lg p-4">
            <h3 class="text-red-800 font-medium mb-2">오류가 발생했습니다:</h3>
            <ul class="list-disc list-inside text-red-700 text-sm">
              <% @user.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <!-- 이름 -->
        <div>
          <%= f.label :name, "이름", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= f.text_field :name, class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition", placeholder: "이름을 입력하세요" %>
        </div>

        <!-- 이메일 (읽기 전용) -->
        <div>
          <%= f.label :email, "이메일", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= f.email_field :email, class: "w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed", disabled: true %>
          <p class="mt-1 text-sm text-gray-500">이메일은 변경할 수 없습니다</p>
        </div>

        <!-- 버튼 -->
        <div class="flex gap-4 pt-4">
          <%= f.submit "저장하기", class: "flex-1 px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition font-medium" %>
          <%= link_to "취소", mypage_path, class: "flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium text-center" %>
        </div>
      <% end %>

      <!-- 비밀번호 변경 섹션 -->
      <div class="mt-12 pt-8 border-t border-gray-200">
        <h2 class="text-xl font-bold text-gray-900 mb-4">비밀번호 변경</h2>
        <p class="text-gray-600 mb-4">비밀번호를 변경하시려면 아래 버튼을 클릭하세요.</p>
        <%= link_to "비밀번호 변경하기", edit_user_registration_path, class: "inline-flex items-center gap-2 px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition font-medium" %>
      </div>

      <!-- 계정 삭제 섹션 -->
      <div class="mt-12 pt-8 border-t border-gray-200">
        <h2 class="text-xl font-bold text-red-600 mb-4">계정 삭제</h2>
        <p class="text-gray-600 mb-4">계정을 삭제하면 모든 데이터가 영구적으로 삭제됩니다.</p>
        <%= button_to "계정 삭제", user_registration_path, method: :delete, data: { turbo: false, confirm: "정말로 계정을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다." }, class: "px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium" %>
      </div>
    </div>
  </div>
</div>

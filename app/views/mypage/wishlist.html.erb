<% content_for :title, "위시리스트 - 디어스" %>

<div class="min-h-screen bg-gray-50 py-12">
  <div class="container mx-auto px-4 max-w-6xl">
    <!-- 헤더 -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-2">위시리스트</h1>
      <p class="text-gray-600">마음에 드는 템플릿을 저장하고 관리하세요</p>
    </div>

    <!-- 탭 메뉴 -->
    <div class="bg-white rounded-2xl shadow-sm mb-8 overflow-x-auto">
      <div class="flex border-b border-gray-200 min-w-max md:min-w-0">
        <%= link_to mypage_path, class: "flex-1 px-3 md:px-6 py-3 md:py-4 text-center font-medium text-gray-600 hover:text-emerald-600 transition text-sm md:text-base whitespace-nowrap" do %>
          <span>대시보드</span>
        <% end %>
        <%= link_to mypage_orders_path, class: "flex-1 px-3 md:px-6 py-3 md:py-4 text-center font-medium text-gray-600 hover:text-emerald-600 transition text-sm md:text-base whitespace-nowrap" do %>
          <span>주문 내역</span>
        <% end %>
        <%= link_to mypage_wishlist_path, class: "flex-1 px-3 md:px-6 py-3 md:py-4 text-center font-medium border-b-2 border-emerald-600 text-emerald-600 text-sm md:text-base whitespace-nowrap" do %>
          <span>위시리스트</span>
        <% end %>
      </div>
    </div>

    <% if @liked_templates.any? %>
      <!-- 템플릿 그리드 -->
      <div class="grid md:grid-cols-3 gap-6">
        <% @liked_templates.each do |template| %>
          <div class="bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-lg transition group">
            <!-- 썸네일 -->
            <div class="relative aspect-video overflow-hidden bg-gray-100">
              <% if template.thumbnail_url.present? %>
                <%= image_tag template.thumbnail_url, class: "w-full h-full object-cover group-hover:scale-105 transition duration-300" %>
              <% else %>
                <div class="w-full h-full bg-gradient-to-br from-emerald-100 to-emerald-200"></div>
              <% end %>
              
              <!-- 좋아요 버튼 -->
              <%= button_to toggle_like_design_template_path(template), method: :post, data: { turbo: false }, class: "absolute top-3 right-3 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-red-50 transition" do %>
                <svg class="w-5 h-5 text-red-500 fill-current" viewBox="0 0 24 24">
                  <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                </svg>
              <% end %>
            </div>

            <!-- 정보 -->
            <div class="p-5">
              <h3 class="font-bold text-gray-900 mb-2 line-clamp-1"><%= template.name %></h3>
              <p class="text-sm text-gray-600 mb-4 line-clamp-2"><%= template.description %></p>
              
              <div class="flex items-center justify-between">
                <div class="text-xl font-bold text-emerald-600">
                  <%= number_to_currency(template.price, unit: '₩', precision: 0) %>
                </div>
                <%= button_to "장바구니 담기", add_to_cart_path(design_template_id: template.id), method: :post, data: { turbo: false }, class: "px-4 py-2 bg-emerald-600 text-white text-sm rounded-lg hover:bg-emerald-700 transition font-medium" %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <!-- 빈 상태 -->
      <div class="bg-white rounded-2xl shadow-sm p-16 text-center">
        <svg class="w-24 h-24 mx-auto mb-6 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
        </svg>
        <h2 class="text-2xl font-bold text-gray-900 mb-2">위시리스트가 비어있습니다</h2>
        <p class="text-gray-600 mb-8">마음에 드는 템플릿을 찾아 저장해보세요</p>
        <%= link_to "템플릿 둘러보기", design_templates_path, class: "inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition font-medium" %>
      </div>
    <% end %>
  </div>
</div>

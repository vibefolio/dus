<%# app/views/components/index.html.erb %>
<div class="p-8 space-y-12 bg-white min-h-screen">
  
  <div class="border-b pb-4">
    <h1 class="text-3xl font-bold">New Components Preview</h1>
    <p class="text-gray-500">Extracted from ArtPage template system.</p>
  </div>

  <%# 1. Instagram Feed Preview %>
  <section class="space-y-4">
    <h2 class="text-xl font-bold flex items-center gap-2">
      <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">Component</span>
      Instagram Feed
    </h2>
    <div class="border p-4 rounded-xl">
      <%= render "components/instagram_feed", username: "dlab_official", brand_name: "D.LAB Design", profile_image: nil %>
    </div>
  </section>

  <%# 2. Parallax Gallery Preview %>
  <section class="space-y-4">
    <h2 class="text-xl font-bold flex items-center gap-2">
      <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">Component</span>
      Parallax 3-Column Gallery
    </h2>
    <div class="border p-4 rounded-xl bg-gray-50 overflow-hidden relative" style="height: 600px;">
      <%# We limit height here just for preview container %>
      <%= render "components/parallax_gallery", images: @gallery_images %>
      
      <%# Inline Script to make the preview work immediately without global controller %>
      <script>
        (function() {
           const container = document.querySelector('[data-controller="parallax-scroll"]');
           if(!container) return;

           const columns = container.querySelectorAll('[data-parallax-scroll-target="column"]');
           
           window.addEventListener('scroll', () => {
             const scrollY = window.scrollY;
             // Simple parallax logic for preview
             columns.forEach((col, index) => {
               let speed = 0.05;
               let yOffset = 0;
               if (index % 3 === 0) yOffset = -(scrollY * speed);
               if (index % 3 === 1) yOffset = (scrollY * speed);
               if (index % 3 === 2) yOffset = -(scrollY * speed * 2); // Varying speeds
               
               col.style.transform = `translateY(${yOffset}px)`;
             });
           });
        })();
      </script>
    </div>
  </section>

</div>

<%# Generic Subpage Layout %>
<%
  primary_color = @theme["primary_color"]
  bg_color = @theme["bg_color"]
  text_color = @theme["text_color"]
  font_css = @theme["font_css"]
  radius = @theme["radius"]

  # Deterministic Layout Variant
  # 0: Classic (Centered Hero, Standard Grid)
  # 1: Modern (Left Hero, Masonry-ish)
  # 2: Bold (Dark Mode Hero, Split Content)
  layout_variant = @template_name.hash.abs % 3
%>

<div class="min-h-screen flex flex-col font-sans" style="font-family: <%= font_css %>; background-color: <%= bg_color %>; color: <%= text_color %>;">

  <%# Navigation %>
  <nav class="border-b sticky top-0 z-50 backdrop-blur-md transition-all duration-300" style="border-color: <%= primary_color %>10; background-color: <%= bg_color %>ee;">
    <div class="container mx-auto px-3 md:px-6 py-4 flex justify-between items-center">
      <a href="<%= template_show_path(template_name: @template_name) %>" class="text-lg md:text-xl font-bold uppercase tracking-wide flex items-center gap-2 group" style="color: <%= primary_color %>">
        <span class="w-2 h-2 <%= radius %> group-hover:scale-125 transition" style="background-color: <%= primary_color %>;"></span>
        <%= @template_name %>
      </a>

      <div class="hidden md:flex gap-12 text-[11px] font-semibold uppercase tracking-widest opacity-60">
        <span class="hover:text-black cursor-pointer transition">About</span>
        <span class="hover:text-black cursor-pointer transition">Service</span>
        <span class="hover:text-black cursor-pointer transition">Contact</span>
      </div>

      <a href="<%= template_show_path(template_name: @template_name) %>" class="text-[10px] md:text-xs font-semibold uppercase tracking-widest opacity-60 hover:opacity-100 transition border px-4 py-2 <%= radius %>" style="border-color: <%= primary_color %>;">
        Back
      </a>
    </div>
  </nav>

  <% if layout_variant == 0 %>
    <%# Variant 0: Classic Centered %>
    <header class="py-32 md:py-40 px-6 relative overflow-hidden flex flex-col items-center text-center">
       <div class="absolute inset-0 opacity-[0.03] pointer-events-none"
            style="background-image: radial-gradient(<%= primary_color %> 1px, transparent 1px); background-size: 24px 24px;"></div>
       <div class="relative z-10 max-w-3xl">
          <span class="inline-block mb-8 px-3 py-1 text-[10px] font-semibold tracking-widest uppercase border <%= radius %>" style="color: <%= primary_color %>; border-color: <%= primary_color %>30;">
            <%= @template_name %> / Classic
          </span>
          <h1 class="text-3xl md:text-5xl font-semibold mb-8 leading-tight tracking-tight" style="color: <%= primary_color %>"><%= @sub_page_title %></h1>
          <p class="text-lg md:text-xl opacity-60 leading-relaxed">
            Timeless design meets modern functionality. <br>We deliver excellence in every pixel.
          </p>
       </div>
    </header>

  <% elsif layout_variant == 1 %>
    <%# Variant 1: Modern Left %>
    <header class="py-32 md:py-40 px-6 relative overflow-hidden flex items-center">
       <div class="absolute top-0 right-0 w-1/2 h-full opacity-[0.05] pointer-events-none" style="background-color: <%= primary_color %>;"></div>
       <div class="container mx-auto grid md:grid-cols-2 gap-20 items-center relative z-10">
          <div>
            <div class="w-12 h-1 mb-12" style="background-color: <%= primary_color %>;"></div>
            <h1 class="text-4xl md:text-6xl font-semibold mb-8 leading-none tracking-tight" style="color: <%= primary_color %>"><%= @sub_page_title %></h1>
            <p class="text-lg opacity-60 leading-relaxed max-w-md">
              Pushing boundaries with a modern aesthetic. <br>Clean lines, bold typography.
            </p>
          </div>
          <div class="hidden md:block">
             <!-- Abstract Shape -->
             <div class="w-full h-64 border <%= radius %> opacity-20" style="border-color: <%= primary_color %>;"></div>
          </div>
       </div>
    </header>

  <% else %>
    <%# Variant 2: Bold Dark %>
    <header class="py-40 md:py-52 px-6 relative overflow-hidden flex items-center" style="background-color: <%= primary_color %>; color: <%= bg_color %>;">
       <div class="container mx-auto relative z-10 text-center">
          <h1 class="text-4xl md:text-7xl font-semibold mb-8 tracking-tight mix-blend-overlay opacity-90"><%= @sub_page_title %></h1>
          <p class="text-xl md:text-2xl font-light tracking-widest opacity-80 uppercase">
            Bold • Impactful • Unique
          </p>
       </div>
    </header>
  <% end %>

  <main class="container mx-auto px-3 md:px-6 py-24 md:py-32 flex-grow">
    <!-- Layout Logic continues here... simplified for brevity but matching tone -->
    <div class="grid md:grid-cols-3 gap-12">
       <% 3.times do |i| %>
         <div class="p-8 border <%= radius %> hover:shadow-lg transition duration-500" style="border-color: <%= primary_color %>20;">
            <h3 class="text-xl font-semibold mb-6" style="color: <%= primary_color %>;">Feature <%= i+1 %></h3>
            <p class="opacity-60 text-sm leading-relaxed">
              Dynamically generated content that fits the <%= @template_name %> style perfectly.
            </p>
         </div>
       <% end %>
    </div>
  </main>

  <footer class="py-20 border-t text-center" style="border-color: <%= primary_color %>10;">
    <p class="text-[10px] font-semibold uppercase tracking-widest opacity-30">&copy; <%= Time.current.year %> <%= @template_name.titleize %>.</p>
  </footer>
</div>

<%# app/views/templates/artpage.html.erb %>
<% content_for :title, "ArtPage - Digital Gallery Platform" %>

<!-- Tailwind Custom Config for this page (Inline for template isolation) -->
<style>
  /* Page specific overrides */
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap');
  
  .font-serif { font-family: 'Playfair Display', serif; }
  .font-sans { font-family: 'Inter', sans-serif; }
  
  .animate-fade-in { animation: fadeIn 1s ease-out forwards; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  
  /* Text outline effect for big watermark */
  .text-outline {
    -webkit-text-stroke: 1px rgba(255, 255, 255, 0.1);
    color: transparent;
  }
</style>

<div class="bg-black text-white min-h-screen font-sans selection:bg-white selection:text-black">

  <!-- 1. Hero Section -->
  <section class="min-h-screen flex flex-col justify-center px-6 md:px-12 pt-20 relative overflow-hidden">
    <!-- Background -->
    <div class="absolute inset-0 z-0">
      <img 
        src="https://images.unsplash.com/photo-1518998053901-5348d3961a04?q=80&w=2574&auto=format&fit=crop"
        alt="Hero Background"
        class="w-full h-full object-cover opacity-60"
      />
      <div class="absolute inset-0 bg-gradient-to-b from-black/30 via-black/50 to-black"></div>
    </div>

    <!-- Watermark -->
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-[0.15] select-none pointer-events-none z-0 mix-blend-overlay">
      <span class="text-[20vw] font-serif font-bold leading-none whitespace-nowrap text-outline">ARTPAGE</span>
    </div>

    <!-- Content -->
    <div class="max-w-screen-xl mx-auto w-full z-10 relative mt-20">
      <div class="max-w-5xl animate-fade-in">
        <h1 class="text-5xl md:text-7xl lg:text-8xl font-serif font-medium leading-[1.1] tracking-tight mb-8">
          The Future of <br/>
          <span class="italic text-gray-400">Digital Archiving</span> <br/>
          for Artists.
        </h1>
        
        <p class="text-xl md:text-2xl text-gray-300 max-w-2xl mb-12 font-light leading-relaxed">
          Create your own digital sanctuary. ArtPage provides the most elegant way to archive, showcase, and connect.
        </p>

        <div class="flex flex-col sm:flex-row gap-6 items-start">
          <a href="#" class="group relative px-8 py-4 bg-white text-black text-lg font-medium overflow-hidden transition-all hover:bg-gray-200 rounded-sm flex items-center gap-2">
            <span>Start Archiving</span>
            <svg class="w-5 h-5 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
          </a>
          
          <a href="#" class="group px-8 py-4 text-lg font-medium border border-white/30 hover:border-white hover:bg-white/10 text-white transition-all flex items-center gap-2 backdrop-blur-sm rounded-sm">
            <span>View Demo</span>
            <svg class="w-5 h-5 transition-transform group-hover:-translate-y-1 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 17L17 7M17 7H7m10 0v10"/></svg>
          </a>
        </div>
      </div>
    </div>

    <div class="absolute bottom-12 left-6 md:left-12 flex items-center gap-4 text-xs font-mono text-white/50 transform -rotate-90 origin-left z-10">
      <span>SCROLL TO EXPLORE</span>
      <div class="w-12 h-px bg-white/50"></div>
    </div>
  </section>

  <!-- 2. Hero Parallax Showcase -->
  <!-- This section simulates the Aceternity UI HeroParallax component -->
  <section id="hero-parallax-section" class="py-20 overflow-hidden bg-black text-white">
    <div class="max-w-7xl mx-auto px-4 mb-20 text-center md:text-left z-10 relative">
      <h2 class="text-3xl md:text-5xl font-serif font-bold mb-4">Created with ArtPage</h2>
      <p class="text-gray-400 text-lg font-light max-w-2xl">
        Join hundreds of artists building their diverse digital portfolios.
      </p>
    </div>

    <!-- Parallax Container (Rotate Layer) -->
    <!-- The padding-bottom creates scroll space -->
    <div class="relative w-full perspective-container" style="perspective: 1000px;">
      <div 
        id="parallax-rotate-layer" 
        class="flex flex-col gap-8 md:gap-16 transform-style-3d origin-center transition-transform duration-100 ease-linear will-change-transform"
        style="transform-style: preserve-3d;"
      >
        
        <!-- Row 1 (Moves Right) -->
        <div class="parallax-row flex gap-8 md:gap-16 min-w-max ml-[-10%]" data-direction="1">
          <% [
            "https://images.unsplash.com/photo-1518640467707-6811f4a6ab73?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1547891654-e66ed7ebb968?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1482160549825-59d1b23cb208?q=80&w=600&auto=format&fit=crop"
          ].each do |img| %>
            <div class="group relative w-[300px] h-[200px] md:w-[500px] md:h-[350px] shrink-0 overflow-hidden rounded-xl bg-gray-900 border border-white/10 hover:border-white/50 transition-colors">
              <img src="<%= img %>" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" loading="lazy" />
              <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                <span class="text-white font-serif text-2xl font-bold">Project View</span>
              </div>
            </div>
          <% end %>
        </div>

        <!-- Row 2 (Moves Left) -->
        <div class="parallax-row flex flex-row-reverse gap-8 md:gap-16 min-w-max match-width" data-direction="-1">
          <% [
            "https://images.unsplash.com/photo-1549490349-8643362247b5?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1558591710-4b4a1ae0f04d?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1563089145-599997674d42?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?q=80&w=600&auto=format&fit=crop"
          ].each do |img| %>
            <div class="group relative w-[300px] h-[200px] md:w-[500px] md:h-[350px] shrink-0 overflow-hidden rounded-xl bg-gray-900 border border-white/10 hover:border-white/50 transition-colors">
              <img src="<%= img %>" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" loading="lazy" />
              <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                 <span class="text-white font-serif text-2xl font-bold">Artist Space</span>
              </div>
            </div>
          <% end %>
        </div>
        
        <!-- Row 3 (Moves Right) -->
        <div class="parallax-row flex gap-8 md:gap-16 min-w-max ml-[-5%]" data-direction="1">
          <% [
            "https://images.unsplash.com/photo-1513542789411-b6a5d4f31634?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1523712999610-f77fbcfc3843?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=600&auto=format&fit=crop",
             "https://images.unsplash.com/photo-1522202176988-66273c2fd55f?q=80&w=600&auto=format&fit=crop",
             "https://images.unsplash.com/photo-1513364776144-60967b0f800f?q=80&w=600&auto=format&fit=crop"
          ].each do |img| %>
            <div class="group relative w-[300px] h-[200px] md:w-[500px] md:h-[350px] shrink-0 overflow-hidden rounded-xl bg-gray-900 border border-white/10 hover:border-white/50 transition-colors">
              <img src="<%= img %>" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" loading="lazy"/>
               <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                 <span class="text-white font-serif text-2xl font-bold">Gallery Item</span>
              </div>
            </div>
          <% end %>
        </div>

      </div>
    </div>
  </section>

  <!-- 3. Features Detail Section -->
  <section class="py-32 px-6 md:px-12 bg-black text-white border-t border-white/10">
     <div class="max-w-screen-xl mx-auto">
        <div class="flex flex-col md:flex-row justify-between items-start mb-24">
            <span class="text-sm font-mono text-gray-500 block mb-4 md:mb-0">01 â€” WHY ARTPAGE</span>
            <h2 class="text-3xl md:text-5xl font-serif font-medium leading-tight max-w-2xl text-right">
              Everything in one Control,<br>
              Purely your own Archive.
            </h2>
        </div>
        
        <div class="space-y-32">
            <!-- Feature 1 -->
            <div class="grid md:grid-cols-2 gap-16 items-center group">
               <div class="order-2 md:order-1 relative aspect-[4/3] overflow-hidden rounded-sm bg-gray-800">
                 <img src="https://images.unsplash.com/photo-1513364776144-60967b0f800f?q=80&w=2971&auto=format&fit=crop" class="object-cover w-full h-full grayscale group-hover:grayscale-0 transition-all duration-700" />
               </div>
               <div class="order-1 md:order-2 space-y-8">
                  <div>
                    <h3 class="text-4xl font-serif mb-4 text-white">Curated <span class="font-bold">Gallery Space</span></h3>
                     <p class="text-lg font-light text-gray-400 leading-relaxed">
                        Design your space exactly as you envision. No templates locking you in. Complete creative freedom for your digital exhibition.
                     </p>
                  </div>
               </div>
            </div>
            
             <!-- Feature 2 -->
            <div class="grid md:grid-cols-2 gap-16 items-center group">
               <div class="space-y-8">
                  <div>
                    <h3 class="text-4xl font-serif mb-4 text-white">Direct <span class="font-bold">Connection</span></h3>
                     <p class="text-lg font-light text-gray-400 leading-relaxed">
                        Engage directly with your collectors. No middlemen. Build a community around your art with integrated newsletter and CRM tools.
                     </p>
                  </div>
               </div>
               <div class="relative aspect-[4/3] overflow-hidden rounded-sm bg-gray-800">
                 <img src="https://images.unsplash.com/photo-1521737604893-d14cc237f11d?q=80&w=2968&auto=format&fit=crop" class="object-cover w-full h-full grayscale group-hover:grayscale-0 transition-all duration-700" />
               </div>
            </div>
        </div>
     </div>
  </section>
</div>

<script>
  (function() {
    function initParallax() {
      const section = document.getElementById('hero-parallax-section');
      const rotateLayer = document.getElementById('parallax-rotate-layer');
      const rows = document.querySelectorAll('.parallax-row');
      
      if (!section || !rotateLayer || rows.length === 0) return;

      const handleScroll = () => {
        const scrollY = window.scrollY;
        const viewportHeight = window.innerHeight;
        
        // Parallax Logic
        // We want the effect to be active when the user scrolls down from top
        const activeRange = 800; // pixels
        let progress = scrollY / activeRange;
        if (progress > 1) progress = 1;
        
        // Calculate transforms
        // Start: RotateX 10deg, RotateZ 5deg, TranslateY 0
        // End: RotateX 0deg, RotateZ 0deg, TranslateY 0
        // (Simplified to avoid too much movement)
        
        const rotateX = 15 * (1 - progress);
        const rotateZ = 10 * (1 - progress);
        const opacity = 0.2 + (0.8 * progress);
        const translateY = -100 * (1 - progress);

        rotateLayer.style.transform = `rotateX(${rotateX}deg) rotateZ(${rotateZ}deg) translateY(${translateY}px)`;
        rotateLayer.style.opacity = opacity;

        // Horizontal Row Movement
        rows.forEach((row, index) => {
          const direction = parseInt(row.dataset.direction || '1');
          const speed = 200; // px
          const xOffset = direction * (speed * progress);
          
          row.style.transform = `translateX(${xOffset}px)`;
        });
      };

      window.addEventListener('scroll', handleScroll, { passive: true });
      handleScroll(); // Init
      
      // Cleanup function attached to element for Turbo to call? 
      // Turbo doesn't auto-call. We rely on idempotency or event listeners being removed on navigation if this script re-runs.
      // But adding listener repeatedly is bad on single page apps.
      
      // Simple guard:
      if (window.parallaxHandler) {
         window.removeEventListener('scroll', window.parallaxHandler);
      }
      window.parallaxHandler = handleScroll;
    }

    // Init on load and turbo:load
    document.addEventListener('turbo:load', initParallax);
    document.addEventListener('DOMContentLoaded', initParallax);
  })();
</script>

<% content_for :title, "돈 벌어주는 홈페이지!" %>
<% content_for :description, "디어스는 AI 기술과 창의적인 디자인으로 비즈니스의 성공을 이끄는 프리미엄 개발 에이전시입니다. 혁신적인 디지털 솔루션으로 비즈니스 성장을 가속화합니다." %>

<!-- Hero Section -->
<section class="hero">
  <div class="hero-content">
<!-- 3D Money Icon Animation -->
    <style>
      @keyframes float-wobble {
        0% { transform: translateY(0) rotate(0deg) scale(1); }
        25% { transform: translateY(-15px) rotate(-5deg) scale(1.05); }
        50% { transform: translateY(0) rotate(0deg) scale(1); }
        75% { transform: translateY(-8px) rotate(5deg) scale(0.98); }
        100% { transform: translateY(0) rotate(0deg) scale(1); }
      }
      .money-icon-3d {
        width: 140px;
        height: 140px;
        margin: 0 auto 20px;
        border-radius: 50%;
        object-fit: cover;
        box-shadow: 0 20px 40px -10px rgba(255, 215, 0, 0.5), inset 0 0 20px rgba(255, 255, 255, 0.5);
        animation: float-wobble 4s ease-in-out infinite;
        background: linear-gradient(135deg, #ffd700, #ffaa00);
        border: 4px solid #fff;
        display: block;
      }
    </style>
    
    <!-- 3D Money Icon Image -->
    <div style="perspective: 1000px;">
      <img src="https://images.unsplash.com/photo-1621416894569-0f39ed31d247?q=80&w=400&auto=format&fit=crop" 
           alt="Money 3D Icon" 
           class="money-icon-3d">
    </div>

    <h1 class="hero-title">
      비싼 홈페이지? NO!<br>
      돈 벌어주는 홈페이지!
    </h1>
    <p class="hero-subtitle">
      합리적인 구독 요금제로<br>
      초기개발비 부담은 낮추고, 사업에 집중하세요!
    </p>
    <div class="hero-cta">
      <%= link_to "구독요금제 보기", pricing_path, class: "btn btn-accent btn-lg" %>
      <%= link_to "디자인 템플릿 보기", design_templates_path, class: "btn btn-outline btn-lg", style: "color: white; border-color: white;" %>
    </div>

    <!-- Stats Grid -->
    <div class="stats-grid" style="display: flex; align-items: stretch; justify-content: center; gap: var(--space-4);">
      <div class="stat-card" style="min-height: 120px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <div class="stat-number">30+</div>
        <div class="stat-label">템플릿 선택</div>
      </div>
      
      <div class="hidden md:flex" style="align-items: center; color: rgba(255,255,255,0.3);">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
      </div>

      <div class="stat-card" style="min-height: 120px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <div class="stat-number">3+</div>
        <div class="stat-label">플랜 선택</div>
      </div>

      <div class="hidden md:flex" style="align-items: center; color: rgba(255,255,255,0.3);">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
      </div>

      <div class="stat-card" style="min-height: 120px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <div class="stat-number">맞춤형</div>
        <div class="stat-label">개발</div>
      </div>

      <div class="hidden md:flex" style="align-items: center; color: rgba(255,255,255,0.3);">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
      </div>

      <div class="stat-card" style="min-height: 120px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <div class="stat-number">안정적인</div>
        <div class="stat-label">유지관리</div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Templates Section -->
<section class="section" style="background: white;">
  <div class="container">
    <div class="text-center" style="margin-bottom: 4rem;">
      <span style="color: var(--color-accent); font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; font-size: var(--text-sm);">PREMIUM TEMPLATES</span>
      <h2 style="font-size: var(--text-5xl); margin-top: var(--space-2); margin-bottom: var(--space-4);">시간과 돈을 벌어주는 디자인 템플릿</h2>
      <p class="text-gray" style="font-size: var(--text-xl); max-width: 700px; margin: 0 auto;">
        업종별 최적화된 고퀄리티 디자인으로<br>합리적인 구독요금제로 빠르게 사업을 시작하세요.
      </p>
    </div>

    <div class="grid grid-3" style="gap: var(--space-8);">
      
      <% if @featured_templates.present? %>
      <% @featured_templates.each do |template| %>
          <div class="card template-card" style="padding: 0; overflow: hidden; border: none; box-shadow: var(--shadow-xl); transition: transform 0.3s, box-shadow 0.3s;" onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 25px 50px -12px rgba(0,0,0,0.25)'" onmouseout="this.style.transform=''; this.style.boxShadow='var(--shadow-xl)'">
            <div style="height: 240px; overflow: hidden; position: relative; cursor: pointer;" onclick="openLiveDemo('<%= template.preview_url %>', '<%= template.title %>')">
              <% 
                img_src = if template.pc_image.attached?
                            url_for(template.pc_image)
                          elsif template.image_url.present?
                            template.image_url
                          else
                            '/images/templates/portfolio_gallery.png'
                          end
              %>
              <img src="<%= img_src %>" 
                   loading="lazy" 
                   decoding="async"
                   alt="<%= template.title %> - <%= template.category %> 웹사이트 템플릿" 
                   style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s;" 
                   class="template-thumb">
              
              <!-- Category Badge -->
              <div style="position: absolute; top: 12px; left: 12px; background: white; padding: 4px 12px; border-radius: 99px; font-size: 12px; font-weight: bold; color: #1a1a1a;">
                <%= case template.category
                   when 'beauty' then '뷰티/살롱'
                   when 'dining' then '다이닝/F&B'
                   when 'fitness' then '피트니스/요가'
                   when 'stay' then '스테이/숙박'
                   when 'shopping' then '쇼핑몰'
                   when 'corporate' then '기업/브랜드'
                   when 'space' then '공간/렌탈'
                   when 'medical' then '병원/의료'
                   when 'cafe' then '카페/베이커리'
                   when 'portfolio' then '포트폴리오'
                   when 'law' then '법률/전문직'
                   else '기타'
                   end
                %>
              </div>
              
              <!-- Hover Overlay -->
              <div class="thumb-overlay" style="position: absolute; inset: 0; background: rgba(0,0,0,0.4); opacity: 0; transition: opacity 0.3s; display: flex; align-items: center; justify-content: center;">
                <span style="background: white; padding: 10px 24px; border-radius: 99px; font-weight: bold; font-size: 14px; color: #1a1a1a; transform: scale(0.9); transition: transform 0.3s;">미리보기</span>
              </div>
            </div>
            <div style="padding: var(--space-6);">
              <h3 style="font-size: var(--text-2xl); font-weight: 700; margin-bottom: var(--space-2);"><%= template.title %></h3>
              <p style="color: var(--color-gray-500); font-size: var(--text-sm); margin-bottom: var(--space-4); line-height: 1.6; min-height: 44px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                <%= template.description %>
              </p>
              <div style="display: flex; gap: 10px;">
                <button onclick="openLiveDemo('<%= template.preview_url %>', '<%= template.title %>')" class="btn btn-outline btn-sm" style="flex: 1; text-align: center;">둘러보기</button>
                <%= link_to "제작 의뢰", contact_path(template_id: template.id, template_title: template.title, preview_url: template.preview_url), class: "btn btn-primary btn-sm", style: "flex: 1; text-align: center;" %>
              </div>
            </div>
          </div>
        <% end %>
      <% else %>
        <!-- Fallback if no templates are featured (Optional: Keep one hardcoded or show message) -->
        <div class="col-span-3 text-center py-10 text-gray-500">
          표시할 추천 템플릿이 없습니다. 관리자 페이지에서 설정해주세요.
        </div>
      <% end %>

    </div>
    
    <div style="text-align: center; margin-top: var(--space-12);">
      <%= link_to "템플릿 더 보기 →", design_templates_path, class: "btn btn-link", style: "font-size: var(--text-lg); font-weight: 600; color: var(--color-primary);" %>
    </div>
  </div>
</section>

<!-- Services Section -->
<section class="section bg-gray-50">
  <div class="container">
    <div class="text-center" style="margin-bottom: 4rem;">
      <h2 style="font-size: var(--text-5xl); margin-bottom: var(--space-4);">우리의 서비스</h2>
      <p class="text-gray" style="font-size: var(--text-xl); max-width: 700px; margin: 0 auto;">
        최고의 기술력과 창의성으로 고객의 비즈니스를 성공으로 이끕니다
      </p>
    </div>

    <div class="grid grid-3">
      <!-- Service 1: Web Development -->
      <div class="card">
        <div style="width: 60px; height: 60px; background: var(--gradient-primary); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; margin-bottom: var(--space-4);">
          <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <rect x="2" y="3" width="20" height="14" rx="2"/>
            <line x1="8" y1="21" x2="16" y2="21"/>
            <line x1="12" y1="17" x2="12" y2="21"/>
          </svg>
        </div>
        <h3 class="card-title">웹 개발</h3>
        <p class="card-text">
          반응형 웹사이트부터 복잡한 웹 애플리케이션까지, 최신 기술 스택을 활용한 고품질 웹 솔루션을 제공합니다.
        </p>
        <ul style="list-style: none; padding: 0; margin-top: var(--space-4); color: var(--color-gray-600);">
          <li style="margin-bottom: var(--space-2);">✓ 반응형 웹사이트</li>
          <li style="margin-bottom: var(--space-2);">✓ 웹 애플리케이션</li>
          <li style="margin-bottom: var(--space-2);">✓ E-커머스 플랫폼</li>
        </ul>
      </div>

      <!-- Service 2: App Development -->
      <div class="card">
        <div style="width: 60px; height: 60px; background: var(--gradient-accent); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; margin-bottom: var(--space-4);">
          <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <rect x="5" y="2" width="14" height="20" rx="2"/>
            <line x1="12" y1="18" x2="12" y2="18"/>
          </svg>
        </div>
        <h3 class="card-title">앱 개발</h3>
        <p class="card-text">
          iOS와 Android를 아우르는 네이티브 및 크로스플랫폼 모바일 앱 개발로 모바일 시장을 선점하세요.
        </p>
        <ul style="list-style: none; padding: 0; margin-top: var(--space-4); color: var(--color-gray-600);">
          <li style="margin-bottom: var(--space-2);">✓ iOS/Android 앱</li>
          <li style="margin-bottom: var(--space-2);">✓ 크로스플랫폼 앱</li>
          <li style="margin-bottom: var(--space-2);">✓ 앱 유지보수</li>
        </ul>
      </div>

      <!-- Service 3: UI/UX Design -->
      <div class="card">
        <div style="width: 60px; height: 60px; background: var(--gradient-primary); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; margin-bottom: var(--space-4);">
          <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
            <path d="M2 17l10 5 10-5"/>
            <path d="M2 12l10 5 10-5"/>
          </svg>
        </div>
        <h3 class="card-title">UI/UX 디자인</h3>
        <p class="card-text">
          사용자 중심의 직관적인 인터페이스와 매력적인 디자인으로 최상의 사용자 경험을 제공합니다.
        </p>
        <ul style="list-style: none; padding: 0; margin-top: var(--space-4); color: var(--color-gray-600);">
          <li style="margin-bottom: var(--space-2);">✓ UI/UX 리서치</li>
          <li style="margin-bottom: var(--space-2);">✓ 프로토타이핑</li>
          <li style="margin-bottom: var(--space-2);">✓ 브랜드 디자인</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- Why Choose Us Section -->
<section class="section">
  <div class="container">
    <div class="text-center" style="margin-bottom: 4rem;">
      <h2 style="font-size: var(--text-5xl); margin-bottom: var(--space-4);">왜 디어스인가?</h2>
      <p class="text-gray" style="font-size: var(--text-xl); max-width: 700px; margin: 0 auto;">
        차별화된 전문성과 경험으로 고객의 성공을 보장합니다
      </p>
    </div>

    <div class="grid grid-2" style="gap: var(--space-8);">
      <div style="display: flex; gap: var(--space-4); align-items: start;">
        <div style="flex-shrink: 0; width: 50px; height: 50px; background: var(--gradient-accent); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center;">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
        </div>
        <div>
          <h4 style="font-size: var(--text-2xl); margin-bottom: var(--space-2);">검증된 전문성</h4>
          <p class="text-gray">
            10년 이상의 경력을 가진 시니어 개발자들이 프로젝트를 직접 관리하고 개발합니다.
          </p>
        </div>
      </div>

      <div style="display: flex; gap: var(--space-4); align-items: start;">
        <div style="flex-shrink: 0; width: 50px; height: 50px; background: var(--gradient-accent); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center;">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
        </div>
        <div>
          <h4 style="font-size: var(--text-2xl); margin-bottom: var(--space-2);">빠른 개발 속도</h4>
          <p class="text-gray">
            애자일 방법론과 최신 개발 도구를 활용하여 빠르고 효율적인 개발을 진행합니다.
          </p>
        </div>
      </div>

      <div style="display: flex; gap: var(--space-4); align-items: start;">
        <div style="flex-shrink: 0; width: 50px; height: 50px; background: var(--gradient-accent); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center;">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
        </div>
        <div>
          <h4 style="font-size: var(--text-2xl); margin-bottom: var(--space-2);">맞춤형 솔루션</h4>
          <p class="text-gray">
            고객의 비즈니스 목표와 요구사항을 정확히 파악하여 최적화된 솔루션을 제공합니다.
          </p>
        </div>
      </div>

      <div style="display: flex; gap: var(--space-4); align-items: start;">
        <div style="flex-shrink: 0; width: 50px; height: 50px; background: var(--gradient-accent); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center;">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
          </svg>
        </div>
        <div>
          <h4 style="font-size: var(--text-2xl); margin-bottom: var(--space-2);">지속적인 지원</h4>
          <p class="text-gray">
            프로젝트 완료 후에도 지속적인 유지보수와 기술 지원을 제공합니다.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CTA Section -->
<section class="section" style="background: var(--gradient-primary); color: white;">
  <div class="container text-center">
    <h2 style="font-size: var(--text-5xl); color: white; margin-bottom: var(--space-4);">
      프로젝트를 시작할 준비가 되셨나요?
    </h2>
    <p style="font-size: var(--text-xl); color: rgba(255, 255, 255, 0.9); margin-bottom: var(--space-8); max-width: 700px; margin-left: auto; margin-right: auto;">
      지금 바로 문의하시면 무료 컨설팅과 견적을 받아보실 수 있습니다
    </p>
    <div style="display: flex; gap: var(--space-4); justify-content: center; flex-wrap: wrap;">
      <%= link_to "디자인 템플릿 보기", design_templates_path, class: "btn btn-accent btn-lg" %>
      <%= link_to "무료 상담 및 문의하기", contact_path, class: "btn btn-outline btn-lg", style: "color: white; border-color: white;" %>
    </div>
  </div>
</section>

<!-- Live Demo Modal -->
<div id="live-demo-modal" style="display: none; position: fixed; inset: 0; z-index: 9999; background: rgba(0,0,0,0.85); backdrop-filter: blur(5px);">
  
  <!-- Header -->
  <div style="position: absolute; top: 0; left: 0; right: 0; height: 60px; background: #1a1a1a; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #333; padding: 0 20px;">
    <div style="color: white; font-weight: bold; font-size: 18px;" id="demo-title">Template Demo</div>
    
    <!-- View Switcher -->
    <div style="background: #333; padding: 4px; border-radius: 99px; display: flex;">
      <button onclick="switchDemoView('pc')" id="btn-demo-pc" class="demo-view-btn active">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
        <span style="margin-left: 6px; font-size: 14px;">PC</span>
      </button>
      <button onclick="switchDemoView('mobile')" id="btn-demo-mobile" class="demo-view-btn">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12" y2="18"></line></svg>
        <span style="margin-left: 6px; font-size: 14px;">Mobile</span>
      </button>
    </div>

    <!-- Close Button -->
    <button onclick="closeLiveDemo()" style="background: none; border: none; color: #999; cursor: pointer; padding: 8px;">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      <span style="font-size: 12px; display: block; margin-top: 2px;">ESC</span>
    </button>
  </div>

  <!-- Content Area -->
  <div style="position: absolute; top: 60px; left: 0; right: 0; bottom: 0; overflow: hidden; display: flex; justify-content: center; align-items: center; padding: 20px;">
    
    <!-- PC Frame -->
    <div id="demo-frame-pc" style="width: 100%; height: 100%; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);">
      <iframe id="iframe-pc" src="" style="width: 100%; height: 100%; border: none;"></iframe>
    </div>

    <!-- Mobile Frame -->
    <div id="demo-frame-mobile" style="display: none; width: 375px; height: 80vh; background: black; border-radius: 40px; border: 12px solid #1a1a1a; overflow: hidden; position: relative; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);">
      <!-- Notch -->
      <div style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 120px; height: 25px; background: #1a1a1a; border-radius: 0 0 15px 15px; z-index: 10;"></div>
      <iframe id="iframe-mobile" src="" style="width: 100%; height: 100%; border: none; background: white;"></iframe>
    </div>

  </div>
</div>

<style>
  .demo-view-btn {
    border: none;
    background: transparent;
    color: #888;
    padding: 6px 16px;
    border-radius: 99px;
    cursor: pointer;
    display: flex;
    align-items: center;
    transition: all 0.2s;
  }
  .demo-view-btn.active {
    background: #555;
    color: white;
  }
  .demo-view-btn:hover:not(.active) {
    color: #ccc;
  }
  
  /* Template Card Hover Effects */
  .template-card:hover .template-thumb {
    transform: scale(1.05);
  }
  .template-card:hover .thumb-overlay {
    opacity: 1;
  }
  .template-card:hover .thumb-overlay span {
    transform: scale(1);
  }
</style>

<script>
  function openLiveDemo(url, title) {
    const modal = document.getElementById('live-demo-modal');
    document.getElementById('demo-title').innerText = title || 'Live Demo';
    
    // Load iframe
    document.getElementById('iframe-pc').src = url;
    document.getElementById('iframe-mobile').src = url;

    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';
    
    // Reset to PC view
    switchDemoView('pc');
  }

  function closeLiveDemo() {
    const modal = document.getElementById('live-demo-modal');
    modal.style.display = 'none';
    document.body.style.overflow = '';
    
    // Reset iframes to stop playback/process
    document.getElementById('iframe-pc').src = '';
    document.getElementById('iframe-mobile').src = '';
  }

  function switchDemoView(mode) {
    const pcFrame = document.getElementById('demo-frame-pc');
    const moFrame = document.getElementById('demo-frame-mobile');
    const btnPc = document.getElementById('btn-demo-pc');
    const btnMo = document.getElementById('btn-demo-mobile');

    if (mode === 'pc') {
      pcFrame.style.display = 'block';
      moFrame.style.display = 'none';
      btnPc.classList.add('active');
      btnMo.classList.remove('active');
    } else {
      pcFrame.style.display = 'none';
      moFrame.style.display = 'block';
      btnPc.classList.remove('active');
      btnMo.classList.add('active');
    }
  }

  // ESC Listener
  document.addEventListener('keydown', function(event) {
    if (document.getElementById('live-demo-modal').style.display === 'block') {
      if (event.key === "Escape") {
        closeLiveDemo();
      }
    }
  });
</script>

